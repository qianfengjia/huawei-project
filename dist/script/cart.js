"use strict";!function(c){var n,d;function p(){var n=0,t=0;c(".goods:visible").each(function(i,o){c(o).find(".goods input").prop("checked")&&(n+=parseInt(c(o).find(".number input").val()),t+=parseFloat(c(o).find(".l_price em").html()))}),c(".total_goods").find("em").html(n),c(".total_price").html(t.toFixed(2))}c.cookie("cookiesid")&&c.cookie("cookienum")&&(n=c.cookie("cookiesid").split(","),d=c.cookie("cookienum").split(","),c.each(n,function(i,o){var t,e;t=n[i],e=d[i],c.ajax({url:"http://10.31.162.26/huawei-project/php/alldata.php",dataType:"json"}).done(function(i){c.each(i,function(i,o){var n;t==o.sid&&((n=c(".goods:hidden").clone(!0,!0)).find(".leftpart").find("img").attr("src",o.url),n.find(".leftpart").find("img").attr("sid",o.sid),n.find(".rightpart").find("a").html(o.title),n.find(".p-price").find("em").html(o.price),n.find(".number").find("input").val(e),n.find(".l_price").find("em").html((o.price*e).toFixed(2)),n.css("display","block"),c(".middle_part").append(n),p())})})})),c(".topcontent input").on("change",function(){c(".goods:visible").find(":checkbox").prop("checked",c(this).prop("checked")),c(".topcontent input").prop("checked",c(this).prop("checked")),p()});var i=c(".goods:visible").find(":checkbox");function o(i){return(parseFloat(i.parents(".goods").find(".p-price em").html())*parseInt(i.parents(".goods").find(".number input").val())).toFixed(2)}c(".middle_part").on("change",i,function(){c(".goods:visible").find(":checkbox").length===c(".goods:visible").find("input:checked").size()?c(".topcontent input").prop("checked",!0):c(".topcontent input").prop("checked",!1),p()}),c(".number_add").on("click",function(){var i=c(this).parents(".goods").find(".number input").val();i++,c(this).parents(".goods").find(".number input").val(i),c(this).parents(".goods").find(".l_price em").html(o(c(this))),p(),s(c(this))}),c(".number_down").on("click",function(){var i=c(this).parents(".goods").find(".number input").val();--i<1&&(i=1),c(this).parents(".goods").find(".number input").val(i),c(this).parents(".goods").find(".l_price em").html(o(c(this))),p(),s(c(this))}),c(".number input").on("input",function(){var i=c(this).val();/^\d+$/g.test(i)||c(this).val(1),c(this).parents(".goods").find(".l_price em").html(o(c(this))),p(),s(c(this))});var t=[],e=[];function s(i){console.log(i),e=c.cookie("cookiesid")&&c.cookie("cookienum")?(t=c.cookie("cookiesid").split(","),c.cookie("cookienum").split(",")):(t=[],[]);var o=i.parents(".goods").find("img").attr("sid");e[c.inArray(o,t)]=i.parents(".goods").find(".number input").val(),console.log(e[c.inArray(o,t)]),console.log(e),c.cookie("cookienum",e,10)}}(jQuery);