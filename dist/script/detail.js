"use strict";!function(c){c("header").load("./common.html"),c("footer").load("./footer.html");var i=location.search.substring(1).split("=")[1],t=c(".topdet_pic"),s=c(".bpic"),a=c(".spic"),i=i||1;c.ajax({url:"http://10.31.162.26/huawei-project/php/getsid.php",data:{sid:i},dataType:"json"}).done(function(i){a.attr("src",i.url),a.attr("sid",i.sid),s.attr("src",i.url);var t=i.piclisturl.split(","),o="";c.each(t,function(i,t){o+='<li><img src="'+t+'"></li>'}),c(".botdet_pic ul").html(o)});var e=c(".fdj"),o=c(".jz");e.width(a.width()*o.width()/s.width()),e.height(a.height()*o.height()/s.height());var r=s.width()/a.width();t.hover(function(){e.css("visibility","visible"),o.css("visibility","visible"),c(this).on("mousemove",function(i){var t=i.pageX-c(".detail").offset().left-e.width()/2,o=i.pageY-c(".detail").offset().top-e.height()/2;t<0?t=0:t>=a.width()-e.width()&&(t=a.width()-e.width()),o<0?o=0:o>=a.height()-e.height()&&(o=a.height()-e.height()),e.css({left:t,top:o}),s.css({left:-t*r,top:-o*r})})},function(){e.css("visibility","hidden"),o.css("visibility","hidden")}),c(".smallpic").on("click","li",function(){var i=c(this).find("img").attr("src");a.attr("src",i),s.attr("src",i)});var n=c(".rightarrow"),l=c(".leftarrow"),h=5;n.on("click",function(){var i=c(".smallpic").children();i.length>h&&(h++,l.css("color","#333"),i.length==h&&n.css("color","#fff"),c(".smallpic").animate({left:-(h-5)*i.eq(0).outerWidth(!0)}))}),l.on("click",function(){var i=c(".smallpic").children();5<h&&(h--,n.css("color","#333"),h<=5&&l.css("color","#fff"),c(".smallpic").animate({left:-(h-5)*i.eq(0).outerWidth(!0)}))}),c(".amount_right span").eq(0).on("click",function(){var i=c("#count").val();i++,c("#count").val(i),u();var t=c(".spic").attr("sid");p[c.inArray(t,d)]=c("#count").val()}),c(".amount_right span").eq(1).on("click",function(){var i=c("#count").val();i--,c("#count").val(i),u();var t=c(".spic").attr("sid");p[c.inArray(t,d)]=c("#count").val()});var d=[],p=[];function u(){p=c.cookie("cookiesid")&&c.cookie("cookienum")?(d=c.cookie("cookiesid").split(","),c.cookie("cookienum").split(",")):(d=[],[])}c(".join").on("click",function(){var i,t=c(this).parents(".detail").find(".spic").attr("sid");u(),-1!=c.inArray(t,d)?(i=parseInt(p[c.inArray(t,d)])+parseInt(c("#count").val()),p[c.inArray(t,d)]=i):(d.push(t),c.cookie("cookiesid",d,{expires:10,path:"/"}),p.push(c("#count").val())),c.cookie("cookienum",p,{expires:10,path:"/"}),alert("确定加入购物车？")})}(jQuery);